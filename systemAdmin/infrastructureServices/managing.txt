> WHAT DO SERVICES LOOK LIKE IN ACTION 
We've talked about lots of services. DNS, DHCP, NTP, and others. As an IT support specialist, it's important to understand how the programs that provide these services operate. So, that you can manage them and fix any problems that pop-up. These programs run as background processes. Also known as daemons, or just services. This means, that the program doesn't need to interact with the user through the graphical interface or the command line interface, to provide the necessary service. The operating system ensures that the program is running. Each service has one or more configuration files, that you as a system administrator will use to determine how you want the service to behave. Some services may offer interactive interfaces, that allow a user to edit the configuration, and to inspect the current status or the usage history. Other services may just rely on the system infrastructure for this. Which means you need to edit the configuration files yourself. You have to know how to start and stop the service, and how to go through its logs to see any current or previous activity. Services are usually configured to start when the machine boots. So that if there is a power outage or a similar event that causes the machine to reboot, you won't need a system administrator to manually restart the service. If you want to decide yourself when the service starts, instead of starting upon boot, you need to change the software configuration to make it start when you want. Similarly, services are usually configured to restart if they crash unexpectedly. If this is not how you want to set up, you may need to change the system configuration than handles these properties. There are lots of services out there, and each may require specific knowledge regarding how to configure it, and when and how to use it. But the general concepts relate to managing and configuring services are the same across the board. In the rest of this lesson, we'll look at examples of how to do this on both Windows and Linux.

> MANAGING SERVICES IN LINUX 
As a system administrator, you will need to know how to look at the status of a running service and how to stop, start and restart running services. The exact way to do this would depend on the operating system you're using, but the concepts are the same. Let's look at a very simple service; Network Time Protocol, NTP. We've caught out before that NTP allows machines to synchronize their clocks. Ubuntu installations include a daemon that runs on the machine and is in charge of synchronizing the clock using NTP. We can check that there's an NTP daemon running on this machine using the service command, Service NTP Status.
Play video starting at ::56 and follow transcript0:56
We can see that there is an NTP service and the system tells us it's running. This service is keeping our clock on time without us even realizing it. If at any point it detects that the clock has drifted, it adjusts the time in a very small increment. It will add or remove 0.5 milliseconds per second until it reaches the desired time. It uses very small increments so that other services which depend on the clock to perform their tasks, won't be affected by a sudden adjustment of the time. Under normal operating conditions, a computer clock will only see very small drifts from the standard time. So, these very small adjustments make sense. If the daemon detects the time has changed more than 128 milliseconds, it assumes that something else is going on and will not interfere. Let's test this by manually modifying the date of the system to a date in the past. So, I'm going to go ahead and type in sudo, date and give it a specified date, 2017-01-01 00:00:00 and that specified date, hit Enter and then type in date. We've set the date to January first, 2017 at 12 AM. If we check the date after a few seconds, it will still be set to January first, 2017 a few seconds past midnight. It does not get adjusted. The NTP daemon sought to change but since it's more than 128 millisecond threshold, its not adjusting the clock. So, how do we make it catch up to the present. There's an option in the NTP daemon that allows it to drastically adjust the clock when it's starting. This is because the daemon is expected to start very early in the process when the machine is booting up. So, there shouldn't be any time dependent services running at that point. If we manually restart the service now, we'll see that the date and time get adjusted. So, let's type in sudo, service, ntp stop. Typing date, sudo service ntp start and then typing date, then Enter. We use the stop action to stop the service and the start action to start it back up. Immediately after starting the service, we can see that the date and time are set back to the present. We use the sudo command to stop and start the service because any user can check the status of the service but only an administrator can cause it to stop and start. An alternative that's available in most services is the restart action, which does a stop followed by a start. Let's see how that one looks. First, let's set that date back to January first, 2017 at 12 AM and then we'll restart the NTP service. So, I'm typing in sudo, date, specify the time. So, 2017-01-01 00:00:00, hit Enter. Then hit date, then hit sudo service ntp restart, then hit date. Now you've seen how to check the status start, stop and restart service in Linux. NTP is a very simple service, but you can also use the same commands to manage much more complex services.

> MANAGING SERVICES IN WINDOWS 
Like Linux, Windows also allows the system administrator to manage the services that are running on the system. For this example, let's look at the Windows Update service. This service is in charge of detecting software updates for either the operating system or other installed programs, downloading them and having them ready to be applied to the system. Let's get the status of the running service using the Get-Service command. So, I'm going to go ahead and open PowerShell and I'm going to go ahead and type in Get-Service. I'm going to type in the shorthand form of Windows Update service which is this. So, wuauserv is a short name for the Windows Update service. We can see that the Windows Update service is running and can get more information about it by running this next command, which is going to be Get-Service wuauserv and then I'm going to type in Format-List and asterisk. This will show us what type of service it is and how it's configured to run. It's a good way to get additional information on a service you're interested in. As with Linux, any user can query the status of a service but only administrators can start or stop a service. If you try to do the next steps with a normal user shell you won't be able to run the commands. Now, let's try stopping the service and then checking the status. For this, I'll open an administrator PowerShell and run the Stop-Service command. So I'm going to go into my Start and instead of clicking on it, I'm going to right-click and then type in run as administrator. Yes, to the security control. So, now I'm going to go ahead and type in Stop-Service wuauserv. Next, I'm going to type in Get-Service wuauserv. So, this service has been stopped. In order to start it back up, we execute the Start-Service command, which I'm going to do Start-Service wuauserv to start the service. Then I'm going to type in Get-Service to show that the service is now running. Finally, you can list all services that are registered in the system using the Get-Service command.
Play video starting at :2:48 and follow transcript2:48
We can also perform these same actions graphically using the services management console. So, I'm going to go ahead and click on start.
Play video starting at :3:5 and follow transcript3:05
This console shows us all the services in the system. The ones that are running will say running in the sales column, while the ones that aren't running won't say anything in the status column. We can find the Windows Update utility at the end of the list. We can stop it by right-clicking on it and then hitting stop and then right-clicking again and hitting start.
Play video starting at :3:33 and follow transcript3:33
There you have it. That's how you get the status Stop and Start services in Windows.

> CONFIGURING SERVICES IN LINUX 
On top of knowing how to query the status, stop, and start services as a system administrator, you have to know how to configure services to meet the needs of your organization. For example, if you're running a DNS server, you'll need to configure the DNS zones that you want to serve. If you're running a Web server, you'll need to configure the different sites and Web applications that you'd like to have enabled.
Play video starting at ::35 and follow transcript0:35
And in general, you'll want to apply any specific security and backup policies to all your services. The details will depend a lot on the operating system and the service, but let's talk about the basics that you'll need to know for all services. Most services are enabled as soon as you install them. These are programs that are shipped with the defaults that are good enough to safely start serving right away, but not all services can provide default values that are suitable for everyone. In some cases, you will need to edit the configuration files before the service can go live. On Windows, most of the configuration is stored in the registry. This can be modified using graphical wizards or using the set service command. On Linux, the configuration files for the installed services are located in the /etc directory. And while some software may ship graphical configuration editors, you typically have to edit the configuration files with a text editor. Let's experiment with a simple ftp server called vsftpd, a service that gets enabled by default when installed. So I'm going to go ahead and type in sudo apt install vsftpd to install the service.
Play video starting at :1:51 and follow transcript1:51
Once it's done installing, the service is already running. We can query the status of the service by running service vsftpd status, and see that it's running. This tells us that the service is already running. We can also verify that it's running by connecting to the ftp server with an ftp client. To do this, I'm going to go ahead and type in lftp localhost.
Play video starting at :2:21 and follow transcript2:21
Lftp is an ftp client program that allows us to connect to an ftp server. When we tell it to connect to local host, it'll try to connect to the ftp server running on local host. Now, let's try to run the ls command to list the contents of the current directory. So I'm going to type in, ls.
Play video starting at :2:46 and follow transcript2:46
And then type in exit.
Play video starting at :2:51 and follow transcript2:51
This is failing because it's requiring a username and password, and we aren't providing them. It makes sense that the default behavior of the ftp server is to be locked down. If we really want to enable anonymous connections, we'll have to do that explicitly. Let's modify the configuration file to allow anonymous connections. To do that, I'll edit the configuration file for this service that's located in the /etc/vsftpd.conf to change the anonymous enable setting from no to yes. So I've got sudo vim /etc/vsftpd.conf, this will open up my config file. And then I want to go ahead and change the anonymous_enable from no to yes, save my configuration file. By changing the value of the anonymous_enable setting from no to yes, we're telling the ftp server program that we won't allow anonymous connections. We've made the change but we aren't done yet. If we try to connect again, ls will still fail.
Play video starting at :3:58 and follow transcript3:58
Ls.
Play video starting at :4:3 and follow transcript4:03
It failed, and then we hit exit. This will also happen with other services because most services read their configuration when they start, and then keep it in memory while they're running. In order for our service to re-read the configuration, we need to tell it to reload. Reloading means that the service re-reads the configuration file without having to stop and start. That way, ongoing connections aren't interrupted, but new connections will use a new configuration. Let's do this for our ftp service, so I type in sudo service vsftpd reload.
Play video starting at :4:45 and follow transcript4:45
Once we've done this we can try to connect again, and this time executing at last will succeed. Let's see, it worked.

> CONFIGURING SERVICES IN WINDOWS 
We've now seen how to start, stop, restart, modify configuration and reload this configuration for Linux services. Let's look at how you can do something similar using Windows. For this example, we'll be using Internet Information Services, the feature offered by Windows to serve web pages. First, we'll need to enable this feature. We'll use the "Turn features on and off" option in the Windows Control Panel. So, I'm going to go ahead and click "Start", "Control Panel", click on the "Turn Windows features on and off."
Play video starting at ::53 and follow transcript0:53
This opens the Server Manager which we can now use to enable Internet information services. So, I'm going to go ahead and click on "Next", "Next" again, "Next" again, so a total of three times. I'm going to go ahead and scroll down and look for Web Server, IIS. I'll click on that. I'm going to click "Add features". Click "Next", click "Next" again, "Next" again, "Next" again, and then hit "Install".
Play video starting at :1:35 and follow transcript1:35
I've selected the web server option to have this service enabled on this Windows Instance. It's now installing all the necessary pieces to enable a web server on this machine.
Play video starting at :1:49 and follow transcript1:49
It's now done installing. When we close this window, we notice that there is a new option on the service manager called IIS. We see here that we have an IIS service running on this server. We can configure this service by right-clicking on the entry and then selecting "Internet information services manager". Then, I'm going to expand on our server and then click on "Sites". These are the websites that are handled by the service. Currently, there's only one called default website. Let's see what this website looks like by navigating to localhost. So I'm going to go ahead and click on "Internet Explorer" and type in "localhost".
Play video starting at :2:36 and follow transcript2:36
Great! Our server is serving the default website. Now, let's add a different website to it. We go back to our Windows Information Services. I've created an example site and stored it in "My documents" folder. Now, I'll copy this example site into the inetpub directory, which is the directory normally used to serve websites when using IIS. So I hit copy. Then, I'm going to go into the Inet directory C:/inetpub.
Play video starting at :3:15 and follow transcript3:15
Now, I paste that example folder for my documents to the Inetpub directory and then hit "Continue" in the Security Control. All right, I've copied my website, now let's enable it in the IIS Manager console. So, let's go back to the console. I can add a new website by right-clicking on the list of websites and selecting the "Add website" option. I'm now presented with a bunch of options that I need to fill in. Let's select example as the name of my website. Let's select the folder that I just copied as the physical path for the website.
Play video starting at :3:57 and follow transcript3:57
Finally, let's select 8080 as the port. This last one is so that the default website can run in the default port, port 80, while our example website can run in a separate port. All right, I set up the new website. IIS tells me that the website is already up and running. Let's see if that's correct. I'm going to go ahead and click on "Internet Explorer", type up "localhost" and type in colon port 8080, and hit enter. Success. We've added a second website to our webserver. We've now seen how to install, manage and configure Linux and Windows services. In the next quick lab exercises, you'll be able to try these actions yourself. Have fun.

